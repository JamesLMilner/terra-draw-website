(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{dHhM:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=void 0,o=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i.key,"string"),"symbol"===r(o)?o:String(o)),i)}var o}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=void 0,i=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r.key,"string"),"symbol"===o(i)?i:String(i)),r)}var i}function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function l(t,e,n){return(e=f(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===u(e)?e:String(e)}function c(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(t,e):void 0}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e){var n,r,i=e.xy,o=e.z,a=e.ends,u=e.parts,s=e.type;if(u){var l=u.map((function(e){return y(t,e)})),f=je.createPartsVector(t,l);return je.startGeometry(t),je.addParts(t,f),je.addType(t,s),je.endGeometry(t)}var c=je.createXyVector(t,i);return o&&(n=je.createZVector(t,o)),a&&(r=je.createEndsVector(t,a)),je.startGeometry(t),r&&je.addEnds(t,r),je.addXy(t,c),n&&je.addZ(t,n),je.addType(t,s),je.endGeometry(t)}function d(t,e,n){if(0!==t.length)if(Array.isArray(t[0])){var r,i=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=h(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}(t);try{for(i.s();!(r=i.n()).done;){d(r.value,e,n)}}catch(t){i.e(t)}finally{i.f()}}else 2===t.length?e.push.apply(e,c(t)):(e.push(t[0],t[1]),n.push(t[2]))}function v(t,e){for(var n=[],r=0;r<t.length;r+=2){var i=[t[r],t[r+1]];e&&i.push(e[r>>1]),n.push(i)}return n}function p(t){return t?me[t]:me.Unknown}function _(t){var e,n,r=t.coordinates,i=[],o=[],a=p(t.type),u=0;switch(t.type){case"Point":case"MultiPoint":case"LineString":d(r,i,o);break;case"MultiLineString":case"Polygon":d(r,i,o),r.length>1&&(e=r.map((function(t){return u+=t.length})));break;case"MultiPolygon":n=r.map((function(t){return{type:"Polygon",coordinates:t}})).map(_)}return{xy:i,z:o.length>0?o:void 0,ends:e,type:a,parts:n}}function m(t){for(var e=p(t.type),n=[],r=0;r<t.geometries.length;r++){var i=t.geometries[r];n.push("GeometryCollection"===i.type?m(i):_(i))}return{type:e,parts:n}}function g(t,e){var n=e;if(n===me.Unknown&&(n=t.type()),n===me.GeometryCollection){for(var r=[],i=0;i<t.partsLength();i++){var o=t.parts(i),a=o.type();r.push(g(o,a))}return{type:me[n],geometries:r}}if(n===me.MultiPolygon){for(var u=[],s=0;s<t.partsLength();s++)u.push(g(t.parts(s),me.Polygon));return{type:me[n],coordinates:u.map((function(t){return t.coordinates}))}}var l=function(t,e){var n=t.xyArray(),r=t.zArray();switch(e){case me.Point:var i=Array.from(n);return r&&i.push(r[0]),i;case me.MultiPoint:case me.LineString:return v(n,r);case me.MultiLineString:case me.Polygon:return function(t,e,n){var r;if(!n||0===n.length)return[v(t,e)];var i=0,o=Array.from(n).map((function(e){return t.slice(i,i=e<<1)}));return e&&(i=0,r=Array.from(n).map((function(t){return e.slice(i,i=t)}))),o.map((function(t,e){return v(t,r?r[e]:void 0)}))}(n,r,t.endsArray())}}(t,n);return{type:me[n],coordinates:l}}function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I(r.key),r)}}function S(t,e,n){return(e=I(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I(t){var e=function(t,e){if("object"!==w(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===w(e)?e:String(e)}function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O(r.key),r)}}function F(t,e,n){return(e=O(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O(t){var e=function(t,e){if("object"!==P(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===P(e)?e:String(e)}function j(t,e,n){var r=n.columns,i=new Oe,o=0,a=1024,u=new Uint8Array(1024),s=new DataView(u.buffer),l=function(t){if(!(o+t<a)){var e=new Uint8Array(a=Math.max(a+t,2*a));e.set(u),s=new DataView((u=e).buffer)}};if(r)for(var f=0;f<r.length;f++){var c=r[f],h=e[c.name];if(null!==h)switch(l(2),s.setUint16(o,f,!0),o+=2,c.type){case xe.Bool:l(1),s.setUint8(o,h),o+=1;break;case xe.Short:l(2),s.setInt16(o,h,!0),o+=2;break;case xe.UShort:l(2),s.setUint16(o,h,!0),o+=2;break;case xe.Int:l(4),s.setInt32(o,h,!0),o+=4;break;case xe.UInt:l(4),s.setUint32(o,h,!0),o+=4;break;case xe.Long:l(8),s.setBigInt64(o,BigInt(h),!0),o+=8;break;case xe.Float:l(4),s.setFloat32(o,h,!0),o+=4;break;case xe.Double:l(8),s.setFloat64(o,h,!0),o+=8;break;case xe.DateTime:case xe.String:var b=Te.encode(h);l(4),s.setUint32(o,b.length,!0),o+=4,l(b.length),u.set(b,o),o+=b.length;break;case xe.Json:var d=Te.encode(JSON.stringify(h));l(4),s.setUint32(o,d.length,!0),o+=4,l(d.length),u.set(d,o),o+=d.length;break;default:throw Error("Unknown type "+c.type)}}var v=0;o>0&&(v=Ae.createPropertiesVector(i,u.slice(0,o)));var p=y(i,t);Ae.startFeature(i),Ae.addGeometry(i,p),v&&Ae.addProperties(i,v);var _=Ae.endFeature(i);return i.finishSizePrefixed(_),i.asUint8Array()}function U(t,e){var n={};if(!e||0===e.length)return n;var r=t.propertiesArray();if(!r)return n;for(var i=new DataView(r.buffer,r.byteOffset),o=t.propertiesLength(),a=0;a<o;){var u=i.getUint16(a,!0);a+=2;var s=e[u],l=s.name;switch(s.type){case xe.Bool:n[l]=!!i.getUint8(a),a+=1;break;case xe.Byte:n[l]=i.getInt8(a),a+=1;break;case xe.UByte:n[l]=i.getUint8(a),a+=1;break;case xe.Short:n[l]=i.getInt16(a,!0),a+=2;break;case xe.UShort:n[l]=i.getUint16(a,!0),a+=2;break;case xe.Int:n[l]=i.getInt32(a,!0),a+=4;break;case xe.UInt:n[l]=i.getUint32(a,!0),a+=4;break;case xe.Long:n[l]=Number(i.getBigInt64(a,!0)),a+=8;break;case xe.ULong:n[l]=Number(i.getBigUint64(a,!0)),a+=8;break;case xe.Float:n[l]=i.getFloat32(a,!0),a+=4;break;case xe.Double:n[l]=i.getFloat64(a,!0),a+=8;break;case xe.DateTime:case xe.String:var f=i.getUint32(a,!0);n[l]=Ce.decode(r.subarray(a+=4,a+f)),a+=f;break;case xe.Json:var c=i.getUint32(a,!0),h=Ce.decode(r.subarray(a+=4,a+c));n[l]=JSON.parse(h),a+=c;break;default:throw Error("Unknown type "+s.type)}}return n}function A(t,e){var n=e.columns;return{type:"Feature",geometry:g(t.geometry(),e.geometryType),properties:U(t,n)}}function T(t,e){if(!t.length)return e;if(!e.length)return t;var n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function C(t){return"function"==typeof t.slice?t:new E("function"==typeof t.read?t:t.getReader())}function E(t){this._source=t,this._array=Ee,this._index=0}function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,M(r.key),r)}}function N(t,e,n){return(e=M(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M(t){var e=function(t,e){if("object"!==V(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===V(e)?e:String(e)}function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,z(r.key),r)}}function q(t,e,n){return(e=z(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z(t){var e=function(t,e){if("object"!==L(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===L(e)?e:String(e)}function G(t){for(var e=Be.getRootAsHeader(t),n=e.featuresCount(),r=e.indexNodeSize(),i=[],o=0;o<e.columnsLength();o++){var a=e.columns(o);if(!a)throw Error("Column unexpectedly missing");if(!a.name())throw Error("Column name unexpectedly missing");i.push({name:a.name(),type:a.type(),title:a.title(),description:a.description(),width:a.width(),precision:a.precision(),scale:a.scale(),nullable:a.nullable(),unique:a.unique(),primary_key:a.primaryKey()})}var u=e.crs(),s=u?{org:u.org(),code:u.code(),name:u.name(),description:u.description(),wkt:u.wkt(),code_string:u.codeString()}:null;return{geometryType:e.geometryType(),columns:i,envelope:null,featuresCount:Number(n),indexNodeSize:r,crs:s,title:e.title(),description:e.description(),metadata:e.metadata()}}function D(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))}function H(t,e){function n(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){u=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){u.label=n[1];break}if(6===n[0]&&u.label<o[1]){u.label=o[1],o=n;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(n);break}o[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var r,i,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}function J(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function W(t){return this instanceof W?(this.v=t,this):new W(t)}function X(t,e,n){function r(t){l[t]&&(s[t]=function(e){return new Promise((function(n,r){f.push([t,e,n,r])>1||i(t,e)}))})}function i(t,e){try{(n=l[t](e)).value instanceof W?Promise.resolve(n.value.v).then(o,a):u(f[0][2],n)}catch(t){u(f[0][3],t)}var n}function o(t){i("next",t)}function a(t){i("throw",t)}function u(t,e){t(e),f.shift(),f.length&&i(f[0][0],f[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,l=n.apply(t,e||[]),f=[];return s={},r("next"),r("throw"),r("return"),s[Symbol.asyncIterator]=function(){return this},s}function Z(t){null!=t&&"function"==typeof t.then&&t.then(Re,Re)}function Y(t){var e=t.err,n=Promise.resolve(t.execution).then((function(t){if(null!=e)throw e;return t}));return t.err=void 0,t.execution=n.then((function(){}),(function(){})),void 0===t.pending?n:t.pending.then((function(){return n}))}function $(t,e){var n=t.state>=3;return Promise.resolve(e).then((function(e){return!n&&t.state>=4?Y(t).then((function(t){return{value:t,done:!0}})):{value:e,done:n}}))}function K(t,e){var n,r;if(!(t.state>=2))if(t.state=2,t.onnext(),t.onstop(),null==t.err&&(t.err=e),0!==t.pushes.length||void 0!==t.buffer&&!t.buffer.empty)try{for(var i=J(t.pushes),o=i.next();!o.done;o=i.next()){o.value.resolve()}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}else Q(t)}function Q(t){var e,n;if(!(t.state>=3)){t.state<2&&K(t),t.state=3,t.buffer=void 0;try{for(var r=J(t.nexts),i=r.next();!i.done;i=r.next()){var o=i.value,a=void 0===t.pending?Y(t):t.pending.then((function(){return Y(t)}));o.resolve($(t,a))}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}t.pushes=[],t.nexts=[]}}function tt(t){t.state>=4||(t.state<3&&Q(t),t.state=4)}function et(t,e){if(Z(e),t.pushes.length>=Le)throw new Me("No more than 1024 pending calls to push are allowed on a single repeater.");if(t.state>=2)return Promise.resolve(void 0);var n,r=void 0===t.pending?Promise.resolve(e):t.pending.then((function(){return e}));(r=r.catch((function(e){t.state<2&&(t.err=e),tt(t)})),t.nexts.length)?(t.nexts.shift().resolve($(t,r)),n=t.nexts.length?Promise.resolve(t.nexts[0].value):void 0===t.buffer||t.buffer.full?new Promise((function(e){return t.onnext=e})):Promise.resolve(void 0)):void 0===t.buffer||t.buffer.full?n=new Promise((function(e){return t.pushes.push({resolve:e,value:r})})):(t.buffer.add(r),n=Promise.resolve(void 0));var i=!0,o={},a=n.catch((function(t){if(i)throw t}));return o.then=function(t,e){return i=!1,Promise.prototype.then.call(n,t,e)},o.catch=function(t){return i=!1,Promise.prototype.catch.call(n,t)},o.finally=n.finally.bind(n),t.pending=r.then((function(){return a})).catch((function(e){t.err=e,tt(t)})),o}function nt(t){if(!(t.state>=1)){t.state=1;var e=et.bind(null,t),n=function(t){var e=K.bind(null,t),n=new Promise((function(e){return t.onstop=e}));return e.then=n.then.bind(n),e.catch=n.catch.bind(n),e.finally=n.finally.bind(n),e}(t);t.execution=new Promise((function(r){return r(t.executor(e,n))})),t.execution.catch((function(){return K(t)}))}}function rt(t,e){var n,r,i=[],o=function(t){null!=t&&"function"==typeof t[Symbol.asyncIterator]?i.push(t[Symbol.asyncIterator]()):null!=t&&"function"==typeof t[Symbol.iterator]?i.push(t[Symbol.iterator]()):i.push(function(){return X(this,arguments,(function(){return H(this,(function(n){switch(n.label){case 0:return e.yieldValues?[4,W(t)]:[3,3];case 1:return[4,n.sent()];case 2:n.sent(),n.label=3;case 3:return e.returnValues?[4,W(t)]:[3,5];case 4:return[2,n.sent()];case 5:return[2]}}))}))}())};try{for(var a=J(t),u=a.next();!u.done;u=a.next()){o(u.value)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i}function it(t){var e=this,n=rt(t,{returnValues:!0});return new ze((function(t,r){return D(e,void 0,void 0,(function(){var e,i,o,a,u,s;return H(this,(function(l){switch(l.label){case 0:if(!n.length)return r(),[2];i=!1,r.then((function(){e(),i=!0})),l.label=1;case 1:l.trys.push([1,,5,7]),a=void 0,u=0,s=function(){var i,s,l,f,c;return H(this,(function(h){switch(h.label){case 0:i=u;try{for(f=void 0,s=J(n),l=s.next();!l.done;l=s.next())Promise.resolve(l.value.next()).then((function(t){t.done?(r(),void 0===o&&(o=t)):u===i&&(u++,e(t))}),(function(t){return r(t)}))}catch(t){f={error:t}}finally{try{l&&!l.done&&(c=s.return)&&c.call(s)}finally{if(f)throw f.error}}return[4,new Promise((function(t){return e=t}))];case 1:return void 0===(a=h.sent())?[3,3]:[4,t(a.value)];case 2:h.sent(),h.label=3;case 3:return[2]}}))},l.label=2;case 2:return i?[3,4]:[5,s()];case 3:return l.sent(),[3,2];case 4:return[2,o&&o.value];case 5:return r(),[4,Promise.race(n.map((function(t){return t.return&&t.return()})))];case 6:return l.sent(),[7];case 7:return[2]}}))}))}))}function ot(t){var e=this,n=rt(t,{yieldValues:!0});return new ze((function(t,r){return D(e,void 0,void 0,(function(){var e,i,o,a=this;return H(this,(function(u){switch(u.label){case 0:if(!n.length)return r(),[2];e=[],i=!1,r.then((function(){var t,n;i=!0;try{for(var r=J(e),o=r.next();!o.done;o=r.next()){(0,o.value)()}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}})),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,Promise.all(n.map((function(n,u){return D(a,void 0,void 0,(function(){var a;return H(this,(function(s){switch(s.label){case 0:s.trys.push([0,,6,9]),s.label=1;case 1:return i?[3,5]:(Promise.resolve(n.next()).then((function(t){return e[u](t)}),(function(t){return r(t)})),[4,new Promise((function(t){e[u]=t}))]);case 2:return void 0===(a=s.sent())?[3,4]:a.done?(o=a,[2]):[4,t(a.value)];case 3:s.sent(),s.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return n.return?[4,n.return()]:[3,8];case 7:s.sent(),s.label=8;case 8:return[7];case 9:return[2]}}))}))})))];case 2:return u.sent(),[2,o&&o.value];case 3:return r(),[7];case 4:return[2]}}))}))}))}function at(t){var e=this,n=rt(t,{returnValues:!0});return new ze((function(t,r){return D(e,void 0,void 0,(function(){var e,i,o,a;return H(this,(function(u){switch(u.label){case 0:if(!n.length)return r(),[2,[]];i=!1,r.then((function(){e(),i=!0})),u.label=1;case 1:u.trys.push([1,,6,8]),u.label=2;case 2:return i?[3,5]:(Promise.all(n.map((function(t){return t.next()}))).then((function(t){return e(t)}),(function(t){return r(t)})),[4,new Promise((function(t){return e=t}))]);case 3:return void 0===(o=u.sent())?[2]:(a=o.map((function(t){return t.value})),o.some((function(t){return t.done}))?[2,a]:[4,t(a)]);case 4:return u.sent(),[3,2];case 5:return[3,8];case 6:return r(),[4,Promise.all(n.map((function(t){return t.return&&t.return()})))];case 7:return u.sent(),[7];case 8:return[2]}}))}))}))}function ut(t){var e=this,n=rt(t,{yieldValues:!0,returnValues:!0});return new ze((function(t,r){return D(e,void 0,void 0,(function(){var e,i,o,a,u,s=this;return H(this,(function(l){switch(l.label){case 0:if(!n.length)return r(),[2,[]];i=[],o=!1,r.then((function(){var t,n;e();try{for(var r=J(i),a=r.next();!a.done;a=r.next()){(0,a.value)()}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}o=!0})),l.label=1;case 1:return l.trys.push([1,,5,7]),Promise.all(n.map((function(t){return t.next()}))).then((function(t){return e(t)}),(function(t){return r(t)})),[4,new Promise((function(t){return e=t}))];case 2:return void 0===(a=l.sent())?[2]:(u=a.map((function(t){return t.value})),a.every((function(t){return t.done}))?[2,u]:[4,t(u.slice())]);case 3:return l.sent(),[4,Promise.all(n.map((function(e,n){return D(s,void 0,void 0,(function(){var s;return H(this,(function(l){switch(l.label){case 0:if(a[n].done)return[2,a[n].value];l.label=1;case 1:return o?[3,4]:(Promise.resolve(e.next()).then((function(t){return i[n](t)}),(function(t){return r(t)})),[4,new Promise((function(t){return i[n]=t}))]);case 2:return void 0===(s=l.sent())?[2,a[n].value]:s.done?[2,s.value]:(u[n]=s.value,[4,t(u.slice())]);case 3:return l.sent(),[3,1];case 4:return[2]}}))}))})))];case 4:return[2,l.sent()];case 5:return r(),[4,Promise.all(n.map((function(t){return t.return&&t.return()})))];case 6:return l.sent(),[7];case 7:return[2]}}))}))}))}function st(t){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},st(t)}function lt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ct(r.key),r)}}function ft(t,e,n){return(e=ct(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ct(t){var e=function(t,e){if("object"!==st(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==st(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===st(e)?e:String(e)}function ht(t){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ht(t)}function bt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,u=[],s=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){l=!0,i=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return yt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mt(r.key),r)}}function pt(t,e,n){return e&&vt(t.prototype,e),n&&vt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _t(t,e,n){return(e=mt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mt(t){var e=function(t,e){if("object"!==ht(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ht(e)?e:String(e)}function gt(t){return new St(t,0)}function wt(t){return function(){return new kt(t.apply(this,arguments))}}function kt(t){function e(r,i){try{var o=t[r](i),a=o.value,u=a instanceof St;Promise.resolve(u?a.v:a).then((function(i){if(u){var s="return"===r?"return":"next";if(!a.k||i.done)return e(s,i);i=t[s](i).value}n(o.done?"return":"normal",i)}),(function(t){e("throw",t)}))}catch(t){n("throw",t)}}function n(t,n){switch(t){case"return":r.resolve({value:n,done:!0});break;case"throw":r.reject(n);break;default:r.resolve({value:n,done:!1})}(r=r.next)?e(r.key,r.arg):i=null}var r,i;this._invoke=function(t,n){return new Promise((function(o,a){var u={key:t,arg:n,resolve:o,reject:a,next:null};i?i=i.next=u:(r=i=u,e(t,n))}))},"function"!=typeof t.return&&(this.return=void 0)}function St(t,e){this.v=t,this.k=e}function It(t,e){e=Math.min(Math.max(+e,2),65535);var n=t,r=n;do{r+=n=Math.ceil(n/e)}while(1!==n);return 40*r}function Pt(t,e){if(e<2)throw Error("Node size must be at least 2");if(0===t)throw Error("Number of items must be greater than 0");var n=t,r=n,i=[n];do{r+=n=Math.ceil(n/e),i.push(n)}while(1!==n);for(var o=[],a=0,u=(n=r,i);a<u.length;a++){var s=u[a];o.push(n-s),n-=s}for(var l=[],f=0;f<i.length;f++)l.push([o[f],o[f]+i[f]]);return l}function xt(){return(xt=wt((function*(t,e,n,r){for(var i=function(){function t(e,n){dt(this,t),_t(this,"_level",void 0),_t(this,"nodes",void 0),this._level=n,this.nodes=e}return pt(t,[{key:"level",value:function(){return this._level}},{key:"startNodeIdx",value:function(){return this.nodes[0]}},{key:"endNodeIdx",value:function(){return this.nodes[1]}},{key:"extendEndNodeIdx",value:function(t){this.nodes[1]=t}},{key:"toString",value:function(){return"[NodeRange level: ".concat(this._level,", nodes: ").concat(this.nodes[0],"-").concat(this.nodes[1],"]")}}]),t}(),o=n.minX,a=n.minY,u=n.maxX,s=n.maxY,l=Pt(t,e),f=l[0][0],c=[new i([0,1],l.length-1)],h=function*(){for(var n=c.shift(),h=n.startNodeIdx(),b=h>=f,y=function(){var t=bt(l[n.level()],2)[1],r=Math.min(n.endNodeIdx()+e,t);return b&&r<t?r+1:r}(),d=y-h,v=new DataView(yield gt(r(40*h,40*d))),p=function*(e){var r=e-h,l=40*r;if(u<v.getFloat64(l+0,!0)||s<v.getFloat64(l+8,!0)||o>v.getFloat64(l+16,!0)||a>v.getFloat64(l+24,!0))return"continue";var y=v.getBigUint64(l+32,!0);if(b){var d=e<t-1?v.getBigUint64(40*(r+1)+32,!0)-y:null,p=e-f;return yield[Number(y),p,Number(d)],"continue"}var _=Ge.global.extraRequestThreshold()/40,m=c[c.length-1];if(void 0!==m&&m.level()==n.level()-1&&y<m.endNodeIdx()+_)return m.extendEndNodeIdx(Number(y)),"continue";var g,w=(g=n.level()-1,new i([Number(y),Number(y)+1],g));void 0!==m&&(m.level(),w.level()),c.push(w)},_=h;_<y;_++)yield*p(_)};0!=c.length;)yield*h()}))).apply(this,arguments)}function Ft(t){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ft(t)}function Ot(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,u=[],s=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){l=!0,i=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(t,e)||jt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(t,e){if(t){if("string"==typeof t)return Ut(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ut(t,e):void 0}}function Ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function At(t,e,n,r,i,o,a){try{var u=t[o](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,i)}function Tt(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){function o(t){At(u,r,i,o,a,"next",t)}function a(t){At(u,r,i,o,a,"throw",t)}var u=t.apply(e,n);o(void 0)}))}}function Ct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nt(r.key),r)}}function Vt(t,e,n){return e&&Et(t.prototype,e),n&&Et(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bt(t,e,n){return(e=Nt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nt(t){var e=function(t,e){if("object"!==Ft(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ft(e)?e:String(e)}function Mt(t){return function(){return new Lt(t.apply(this,arguments))}}function Lt(t){function e(r,i){try{var o=t[r](i),a=o.value,u=a instanceof qt;Promise.resolve(u?a.v:a).then((function(i){if(u){var s="return"===r?"return":"next";if(!a.k||i.done)return e(s,i);i=t[s](i).value}n(o.done?"return":"normal",i)}),(function(t){e("throw",t)}))}catch(t){n("throw",t)}}function n(t,n){switch(t){case"return":r.resolve({value:n,done:!0});break;case"throw":r.reject(n);break;default:r.resolve({value:n,done:!1})}(r=r.next)?e(r.key,r.arg):i=null}var r,i;this._invoke=function(t,n){return new Promise((function(o,a){var u={key:t,arg:n,resolve:o,reject:a,next:null};i?i=i.next=u:(r=i=u,e(t,n))}))},"function"!=typeof t.return&&(this.return=void 0)}function Rt(t){return new qt(t,0)}function qt(t,e){this.v=t,this.k=e}function zt(t){var e,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(e=t[n]))return e.call(t);if(r&&null!=(e=t[r]))return new Gt(e.call(t));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Gt(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return Gt=function(t){this.s=t,this.n=t.next},Gt.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new Gt(t)}function Dt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ht(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ht(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Jt(t){var e,n,r=Dt(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(e===me.Unknown)break;var o=p(i.getGeometry?i.getGeometry().getType():i.geometry.type);void 0===e?e=o:e!==o&&(e=me.Unknown)}}catch(t){r.e(t)}finally{r.f()}if(void 0===e)throw Error("Could not infer geometry type for collection of features.");return e}function Wt(t){return Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wt(t)}function Xt(t,e,n,r,i,o,a){try{var u=t[o](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,i)}function Zt(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){function o(t){Xt(u,r,i,o,a,"next",t)}function a(t){Xt(u,r,i,o,a,"throw",t)}var u=t.apply(e,n);o(void 0)}))}}function Yt(t){var e,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(e=t[n]))return e.call(t);if(r&&null!=(e=t[r]))return new $t(e.call(t));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function $t(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return $t=function(t){this.s=t,this.n=t.next},$t.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new $t(t)}function Kt(t){return new ee(t,0)}function Qt(t){return function(){return new te(t.apply(this,arguments))}}function te(t){function e(r,i){try{var o=t[r](i),a=o.value,u=a instanceof ee;Promise.resolve(u?a.v:a).then((function(i){if(u){var s="return"===r?"return":"next";if(!a.k||i.done)return e(s,i);i=t[s](i).value}n(o.done?"return":"normal",i)}),(function(t){e("throw",t)}))}catch(t){n("throw",t)}}function n(t,n){switch(t){case"return":r.resolve({value:n,done:!0});break;case"throw":r.reject(n);break;default:r.resolve({value:n,done:!1})}(r=r.next)?e(r.key,r.arg):i=null}var r,i;this._invoke=function(t,n){return new Promise((function(o,a){var u={key:t,arg:n,resolve:o,reject:a,next:null};i?i=i.next=u:(r=i=u,e(t,n))}))},"function"!=typeof t.return&&(this.return=void 0)}function ee(t,e){this.v=t,this.k=e}function ne(t,e,n){if(!t.subarray(0,3).every((function(t,e){return De[e]===t})))throw Error("Not a FlatGeobuf file");var r=new Fe(t),i=r.readUint32(De.length);r.setPosition(De.length+4);var o=G(r);n&&n(o);var a=De.length+4+i,u=o.indexNodeSize;u>0&&(a+=It(o.featuresCount,u));for(var s=[];a<r.capacity();){var l=r.readUint32(a);r.setPosition(a+4);var f=Ae.getRootAsFeature(r);s.push(e(f,o)),a+=4+l}return s}function re(){return re=Qt((function*(t,e,n){var r,i=C(t),o=function(){var t=Zt((function*(t){return yield i.slice(t)}));return function(e){return t.apply(this,arguments)}}(),a=new Uint8Array(yield Kt(o(8,"magic bytes")));if(!a.subarray(0,3).every((function(t,e){return De[e]===t})))throw Error("Not a FlatGeobuf file");a=new Uint8Array(yield Kt(o(4,"header length")));var u=new Fe(a),s=u.readUint32(0);a=new Uint8Array(yield Kt(o(s,"header data")));var l=G(u=new Fe(a));n&&n(l);var f=l.indexNodeSize;if(f>0){var c=It(l.featuresCount,f);yield Kt(o(c,"entire index, w/o rect"))}for(;r=yield Kt(ae(o,l,e));)yield r})),re.apply(this,arguments)}function ie(){return oe.apply(this,arguments)}function oe(){return oe=Qt((function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return function*(){var o,a=yield Kt(He.open(t,i)),u=!1,s=!1;try{for(var l,f=Yt((r&&r(a.header),a.selectBbox(e)));u=!(l=yield Kt(f.next())).done;u=!1){var c=l.value;yield n(c,a.header)}}catch(t){s=!0,o=t}finally{try{u&&null!=f.return&&(yield Kt(f.return()))}finally{if(s)throw o}}}()})),oe.apply(this,arguments)}function ae(){return ue.apply(this,arguments)}function ue(){return(ue=Zt((function*(t,e,n){var r=new Uint8Array(yield t(4,"feature length"));if(0!==r.byteLength){var i=new Fe(r),o=i.readUint32(0);r=new Uint8Array(yield t(o,"feature data"));var a=new Uint8Array(o+4);return a.set(r,4),(i=new Fe(a)).setPosition(4),n(Ae.getRootAsFeature(i),e)}}))).apply(this,arguments)}function se(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=new Oe,i=0;t.columns&&(i=Be.createColumnsVector(r,t.columns.map((function(t){return function(t,e){var n=t.createString(e.name);return Ue.startColumn(t),Ue.addName(t,n),Ue.addType(t,e.type),Ue.endColumn(t)}(r,t)}))));var o=r.createString("L1");n&&(Ve.startCrs(r),Ve.addCode(r,n),e=Ve.endCrs(r)),Be.startHeader(r),e&&Be.addCrs(r,e),Be.addFeaturesCount(r,BigInt(t.featuresCount)),Be.addGeometryType(r,t.geometryType),Be.addIndexNodeSize(r,0),i&&Be.addColumns(r,i),Be.addName(r,o);var a=Be.endHeader(r);return r.finishSizePrefixed(a),r.asUint8Array()}function le(t,e){return{name:e,type:function(t){if("boolean"==typeof t)return xe.Bool;if("number"==typeof t)return t%1==0?xe.Int:xe.Double;if("string"==typeof t||null===t)return xe.String;if("object"==Wt(t))return xe.Json;throw Error("Unknown type (value '".concat(t,"')"))}(t[e]),title:null,description:null,width:-1,precision:-1,scale:-1,nullable:!0,unique:!1,primary_key:!1}}function fe(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ce(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ce(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function he(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=function(t){var e=t.features[0].properties,n=null;return e&&(n=Object.keys(e).map((function(t){return le(e,t)}))),{geometryType:Jt(t.features),columns:n,envelope:null,featuresCount:t.features.length,indexNodeSize:0,crs:null,title:null,description:null,metadata:null}}(t),r=se(n,e),i=t.features.map((function(t){return j("GeometryCollection"===t.geometry.type?m(t.geometry):_(t.geometry),t.properties,n)})),o=i.map((function(t){return t.length})).reduce((function(t,e){return t+e})),a=new Uint8Array(De.length+r.length+o);a.set(r,De.length);var u,s=De.length+r.length,l=fe(i);try{for(l.s();!(u=l.n()).done;){var f=u.value;a.set(f,s),s+=f.length}}catch(t){l.e(t)}finally{l.f()}return a.set(De),a}function be(t,e){return{type:"FeatureCollection",features:ne(t,A,e)}}function ye(t,e){return function(t,e,n){return re.apply(this,arguments)}(t,A,e)}function de(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ie(t,e,A,n,r)}function ve(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return he(t,e)}function pe(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t instanceof Uint8Array?be(t,n):t instanceof ReadableStream?ye(t,n):de(t,e,n,r)}var _e,me;n.r(e),n.d(e,"serialize",(function(){return ve})),n.d(e,"deserialize",(function(){return pe})),(_e=me||(me={}))[_e.Unknown=0]="Unknown",_e[_e.Point=1]="Point",_e[_e.LineString=2]="LineString",_e[_e.Polygon=3]="Polygon",_e[_e.MultiPoint=4]="MultiPoint",_e[_e.MultiLineString=5]="MultiLineString",_e[_e.MultiPolygon=6]="MultiPolygon",_e[_e.GeometryCollection=7]="GeometryCollection",_e[_e.CircularString=8]="CircularString",_e[_e.CompoundCurve=9]="CompoundCurve",_e[_e.CurvePolygon=10]="CurvePolygon",_e[_e.MultiCurve=11]="MultiCurve",_e[_e.MultiSurface=12]="MultiSurface",_e[_e.Curve=13]="Curve",_e[_e.Surface=14]="Surface",_e[_e.PolyhedralSurface=15]="PolyhedralSurface",_e[_e.TIN=16]="TIN",_e[_e.Triangle=17]="Triangle";var ge,we=new Int32Array(2),ke=new Float32Array(we.buffer),Se=new Float64Array(we.buffer),Ie=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];!function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(ge||(ge={}));var Pe,xe,Fe=function(){function t(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}var e,n,r;return e=t,r=[{key:"allocate",value:function(e){return new t(new Uint8Array(e))}}],(n=[{key:"clear",value:function(){this.position_=0}},{key:"bytes",value:function(){return this.bytes_}},{key:"position",value:function(){return this.position_}},{key:"setPosition",value:function(t){this.position_=t}},{key:"capacity",value:function(){return this.bytes_.length}},{key:"readInt8",value:function(t){return this.readUint8(t)<<24>>24}},{key:"readUint8",value:function(t){return this.bytes_[t]}},{key:"readInt16",value:function(t){return this.readUint16(t)<<16>>16}},{key:"readUint16",value:function(t){return this.bytes_[t]|this.bytes_[t+1]<<8}},{key:"readInt32",value:function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}},{key:"readUint32",value:function(t){return this.readInt32(t)>>>0}},{key:"readInt64",value:function(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}},{key:"readUint64",value:function(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}},{key:"readFloat32",value:function(t){return we[0]=this.readInt32(t),ke[0]}},{key:"readFloat64",value:function(t){return we[Ie?0:1]=this.readInt32(t),we[Ie?1:0]=this.readInt32(t+4),Se[0]}},{key:"writeInt8",value:function(t,e){this.bytes_[t]=e}},{key:"writeUint8",value:function(t,e){this.bytes_[t]=e}},{key:"writeInt16",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}},{key:"writeUint16",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}},{key:"writeInt32",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}},{key:"writeUint32",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}},{key:"writeInt64",value:function(t,e){this.writeInt32(t,Number(BigInt.asIntN(32,e))),this.writeInt32(t+4,Number(BigInt.asIntN(32,e>>BigInt(32))))}},{key:"writeUint64",value:function(t,e){this.writeUint32(t,Number(BigInt.asUintN(32,e))),this.writeUint32(t+4,Number(BigInt.asUintN(32,e>>BigInt(32))))}},{key:"writeFloat32",value:function(t,e){ke[0]=e,this.writeInt32(t,we[0])}},{key:"writeFloat64",value:function(t,e){Se[0]=e,this.writeInt32(t,we[Ie?0:1]),this.writeInt32(t+4,we[Ie?1:0])}},{key:"getBufferIdentifier",value:function(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}},{key:"__offset",value:function(t,e){var n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0}},{key:"__union",value:function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}},{key:"__string",value:function(t,e){t+=this.readInt32(t);var n=this.readInt32(t),r=this.bytes_.subarray(t+=4,t+n);return e===ge.UTF8_BYTES?r:this.text_decoder_.decode(r)}},{key:"__union_with_string",value:function(t,e){return"string"==typeof t?this.__string(e):this.__union(t,e)}},{key:"__indirect",value:function(t){return t+this.readInt32(t)}},{key:"__vector",value:function(t){return t+this.readInt32(t)+4}},{key:"__vector_len",value:function(t){return this.readInt32(t+this.readInt32(t))}},{key:"__has_identifier",value:function(t){if(4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(var e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}},{key:"createScalarList",value:function(t,e){for(var n=[],r=0;r<e;++r){var i=t(r);null!==i&&n.push(i)}return n}},{key:"createObjList",value:function(t,e){for(var n=[],r=0;r<e;++r){var i=t(r);null!==i&&n.push(i.unpack())}return n}}])&&i(e.prototype,n),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Oe=function(){function t(e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder,this.bb=Fe.allocate(n=e||1024),this.space=n}var e,n,r;return e=t,r=[{key:"growByteBuffer",value:function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=e<<1,r=Fe.allocate(n);return r.setPosition(n-e),r.bytes().set(t.bytes(),n-e),r}}],(n=[{key:"clear",value:function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}},{key:"forceDefaults",value:function(t){this.force_defaults=t}},{key:"dataBuffer",value:function(){return this.bb}},{key:"asUint8Array",value:function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}},{key:"prep",value:function(e,n){e>this.minalign&&(this.minalign=e);for(var r=1+~(this.bb.capacity()-this.space+n)&e-1;this.space<r+e+n;){var i=this.bb.capacity();this.bb=t.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}},{key:"pad",value:function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)}},{key:"writeInt8",value:function(t){this.bb.writeInt8(this.space-=1,t)}},{key:"writeInt16",value:function(t){this.bb.writeInt16(this.space-=2,t)}},{key:"writeInt32",value:function(t){this.bb.writeInt32(this.space-=4,t)}},{key:"writeInt64",value:function(t){this.bb.writeInt64(this.space-=8,t)}},{key:"writeFloat32",value:function(t){this.bb.writeFloat32(this.space-=4,t)}},{key:"writeFloat64",value:function(t){this.bb.writeFloat64(this.space-=8,t)}},{key:"addInt8",value:function(t){this.prep(1,0),this.writeInt8(t)}},{key:"addInt16",value:function(t){this.prep(2,0),this.writeInt16(t)}},{key:"addInt32",value:function(t){this.prep(4,0),this.writeInt32(t)}},{key:"addInt64",value:function(t){this.prep(8,0),this.writeInt64(t)}},{key:"addFloat32",value:function(t){this.prep(4,0),this.writeFloat32(t)}},{key:"addFloat64",value:function(t){this.prep(8,0),this.writeFloat64(t)}},{key:"addFieldInt8",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))}},{key:"addFieldInt16",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))}},{key:"addFieldInt32",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))}},{key:"addFieldInt64",value:function(t,e,n){(this.force_defaults||e!==n)&&(this.addInt64(e),this.slot(t))}},{key:"addFieldFloat32",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))}},{key:"addFieldFloat64",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))}},{key:"addFieldOffset",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))}},{key:"addFieldStruct",value:function(t,e,n){e!=n&&(this.nested(e),this.slot(t))}},{key:"nested",value:function(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}},{key:"notNested",value:function(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}},{key:"slot",value:function(t){null!==this.vtable&&(this.vtable[t]=this.offset())}},{key:"offset",value:function(){return this.bb.capacity()-this.space}},{key:"addOffset",value:function(t){this.prep(4,0),this.writeInt32(this.offset()-t+4)}},{key:"startObject",value:function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()}},{key:"endObject",value:function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&0==this.vtable[e];e--);for(var n=e+1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);var r=2*(n+2);this.addInt16(r);var i=0,o=this.space;t:for(e=0;e<this.vtables.length;e++){var a=this.bb.capacity()-this.vtables[e];if(r==this.bb.readInt16(a)){for(var u=2;u<r;u+=2)if(this.bb.readInt16(o+u)!=this.bb.readInt16(a+u))continue t;i=this.vtables[e];break}}return i?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,i-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}},{key:"finish",value:function(t,e,n){var r=n?4:0;if(e){var i=e;if(this.prep(this.minalign,8+r),4!=i.length)throw new TypeError("FlatBuffers: file identifier must be length 4");for(var o=3;o>=0;o--)this.writeInt8(i.charCodeAt(o))}this.prep(this.minalign,4+r),this.addOffset(t),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}},{key:"finishSizePrefixed",value:function(t,e){this.finish(t,e,!0)}},{key:"requiredField",value:function(t,e){var n=this.bb.capacity()-t,r=n-this.bb.readInt32(n);if(!(e<this.bb.readInt16(r)&&0!=this.bb.readInt16(r+e)))throw new TypeError("FlatBuffers: field "+e+" must be set")}},{key:"startVector",value:function(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(4,t*e),this.prep(n,t*e)}},{key:"endVector",value:function(){return this.writeInt32(this.vector_num_elems),this.offset()}},{key:"createSharedString",value:function(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);var e=this.createString(t);return this.string_maps.set(t,e),e}},{key:"createString",value:function(t){return null==t?0:(e=t instanceof Uint8Array?t:this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),this.bb.bytes().set(e,this.space),this.endVector());var e}},{key:"createByteVector",value:function(t){return null==t?0:(this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length),this.bb.bytes().set(t,this.space),this.endVector())}},{key:"createObjectOffset",value:function(t){return null===t?0:"string"==typeof t?this.createString(t):t.pack(this)}},{key:"createObjectOffsetList",value:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];if(null===r)throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");e.push(this.createObjectOffset(r))}return e}},{key:"createStructOffsetList",value:function(t,e){return e(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}}])&&a(e.prototype,n),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),je=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,"bb",null),l(this,"bb_pos",0)}var e,n,r;return e=t,r=[{key:"getRootAsGeometry",value:function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsGeometry",value:function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startGeometry",value:function(t){t.startObject(8)}},{key:"addEnds",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"createEndsVector",value:function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}},{key:"startEndsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"addXy",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createXyVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startXyVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addZ",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"createZVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startZVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addM",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"createMVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startMVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addT",value:function(t,e){t.addFieldOffset(4,e,0)}},{key:"createTVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startTVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addTm",value:function(t,e){t.addFieldOffset(5,e,0)}},{key:"createTmVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}},{key:"startTmVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addType",value:function(t,e){t.addFieldInt8(6,e,me.Unknown)}},{key:"addParts",value:function(t,e){t.addFieldOffset(7,e,0)}},{key:"createPartsVector",value:function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}},{key:"startPartsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"endGeometry",value:function(t){return t.endObject()}},{key:"createGeometry",value:function(e,n,r,i,o,a,u,s,l){return t.startGeometry(e),t.addEnds(e,n),t.addXy(e,r),t.addZ(e,i),t.addM(e,o),t.addT(e,a),t.addTm(e,u),t.addType(e,s),t.addParts(e,l),t.endGeometry(e)}}],(n=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"ends",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}},{key:"endsLength",value:function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"endsArray",value:function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"xy",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"xyLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"xyArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"z",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"zLength",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"zArray",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"m",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"mLength",value:function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"mArray",value:function(){var t=this.bb.__offset(this.bb_pos,10);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"t",value:function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"tLength",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"tArray",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"tm",value:function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*t):BigInt(0)}},{key:"tmLength",value:function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"type",value:function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint8(this.bb_pos+t):me.Unknown}},{key:"parts",value:function(e,n){var r=this.bb.__offset(this.bb_pos,18);return r?(n||new t).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}},{key:"partsLength",value:function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}}])&&s(e.prototype,n),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();(Pe=xe||(xe={}))[Pe.Byte=0]="Byte",Pe[Pe.UByte=1]="UByte",Pe[Pe.Bool=2]="Bool",Pe[Pe.Short=3]="Short",Pe[Pe.UShort=4]="UShort",Pe[Pe.Int=5]="Int",Pe[Pe.UInt=6]="UInt",Pe[Pe.Long=7]="Long",Pe[Pe.ULong=8]="ULong",Pe[Pe.Float=9]="Float",Pe[Pe.Double=10]="Double",Pe[Pe.String=11]="String",Pe[Pe.Json=12]="Json",Pe[Pe.DateTime=13]="DateTime",Pe[Pe.Binary=14]="Binary";var Ue=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),S(this,"bb",null),S(this,"bb_pos",0)}var e,n,r;return e=t,r=[{key:"getRootAsColumn",value:function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsColumn",value:function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startColumn",value:function(t){t.startObject(11)}},{key:"addName",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addType",value:function(t,e){t.addFieldInt8(1,e,xe.Byte)}},{key:"addTitle",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"addWidth",value:function(t,e){t.addFieldInt32(4,e,-1)}},{key:"addPrecision",value:function(t,e){t.addFieldInt32(5,e,-1)}},{key:"addScale",value:function(t,e){t.addFieldInt32(6,e,-1)}},{key:"addNullable",value:function(t,e){t.addFieldInt8(7,+e,1)}},{key:"addUnique",value:function(t,e){t.addFieldInt8(8,+e,0)}},{key:"addPrimaryKey",value:function(t,e){t.addFieldInt8(9,+e,0)}},{key:"addMetadata",value:function(t,e){t.addFieldOffset(10,e,0)}},{key:"endColumn",value:function(t){var e=t.endObject();return t.requiredField(e,4),e}},{key:"createColumn",value:function(e,n,r,i,o,a,u,s,l,f,c,h){return t.startColumn(e),t.addName(e,n),t.addType(e,r),t.addTitle(e,i),t.addDescription(e,o),t.addWidth(e,a),t.addPrecision(e,u),t.addScale(e,s),t.addNullable(e,l),t.addUnique(e,f),t.addPrimaryKey(e,c),t.addMetadata(e,h),t.endColumn(e)}}],(n=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"type",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):xe.Byte}},{key:"title",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"width",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"precision",value:function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"scale",value:function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"nullable",value:function(){var t=this.bb.__offset(this.bb_pos,18);return!t||!!this.bb.readInt8(this.bb_pos+t)}},{key:"unique",value:function(){var t=this.bb.__offset(this.bb_pos,20);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"primaryKey",value:function(){var t=this.bb.__offset(this.bb_pos,22);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"metadata",value:function(t){var e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__string(this.bb_pos+e,t):null}}])&&k(e.prototype,n),r&&k(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Ae=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),F(this,"bb",null),F(this,"bb_pos",0)}var e,n,r;return e=t,r=[{key:"getRootAsFeature",value:function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsFeature",value:function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startFeature",value:function(t){t.startObject(3)}},{key:"addGeometry",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addProperties",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createPropertiesVector",value:function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()}},{key:"startPropertiesVector",value:function(t,e){t.startVector(1,e,1)}},{key:"addColumns",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"createColumnsVector",value:function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}},{key:"startColumnsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"endFeature",value:function(t){return t.endObject()}},{key:"finishFeatureBuffer",value:function(t,e){t.finish(e)}},{key:"finishSizePrefixedFeatureBuffer",value:function(t,e){t.finish(e,void 0,!0)}},{key:"createFeature",value:function(e,n,r,i){return t.startFeature(e),t.addGeometry(e,n),t.addProperties(e,r),t.addColumns(e,i),t.endFeature(e)}}],(n=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"geometry",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?(t||new je).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}},{key:"properties",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}},{key:"propertiesLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"propertiesArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"columns",value:function(t,e){var n=this.bb.__offset(this.bb_pos,8);return n?(e||new Ue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}},{key:"columnsLength",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}}])&&x(e.prototype,n),r&&x(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Te=new TextEncoder,Ce=new TextDecoder,Ee=new Uint8Array(0);E.prototype.read=function(){var t=this,e=t._array.subarray(t._index);return t._source.read().then((function(n){return t._array=Ee,t._index=0,n.done?e.length>0?{done:!1,value:e}:{done:!0,value:void 0}:{done:!1,value:T(e,n.value)}}))},E.prototype.slice=function(t){if((t|=0)<0)throw new Error("invalid length");var e=this,n=this._array.length-this._index;if(this._index+t<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=t));var r=new Uint8Array(t);return r.set(this._array.subarray(this._index)),function i(){return e._source.read().then((function(o){return o.done?(e._array=Ee,e._index=0,n>0?r.subarray(0,n):null):n+o.value.length>=t?(e._array=o.value,e._index=t-n,r.set(o.value.subarray(0,t-n),n),r):(r.set(o.value,n),n+=o.value.length,i())}))}()},E.prototype.cancel=function(){return this._source.cancel()};var Ve=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),N(this,"bb",null),N(this,"bb_pos",0)}var e,n,r;return e=t,r=[{key:"getRootAsCrs",value:function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsCrs",value:function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startCrs",value:function(t){t.startObject(6)}},{key:"addOrg",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addCode",value:function(t,e){t.addFieldInt32(1,e,0)}},{key:"addName",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"addWkt",value:function(t,e){t.addFieldOffset(4,e,0)}},{key:"addCodeString",value:function(t,e){t.addFieldOffset(5,e,0)}},{key:"endCrs",value:function(t){return t.endObject()}},{key:"createCrs",value:function(e,n,r,i,o,a,u){return t.startCrs(e),t.addOrg(e,n),t.addCode(e,r),t.addName(e,i),t.addDescription(e,o),t.addWkt(e,a),t.addCodeString(e,u),t.endCrs(e)}}],(n=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"org",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"code",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"wkt",value:function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"codeString",value:function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}}])&&B(e.prototype,n),r&&B(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Be=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),q(this,"bb",null),q(this,"bb_pos",0)}var e,n,r;return e=t,r=[{key:"getRootAsHeader",value:function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsHeader",value:function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startHeader",value:function(t){t.startObject(14)}},{key:"addName",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addEnvelope",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createEnvelopeVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startEnvelopeVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addGeometryType",value:function(t,e){t.addFieldInt8(2,e,me.Unknown)}},{key:"addHasZ",value:function(t,e){t.addFieldInt8(3,+e,0)}},{key:"addHasM",value:function(t,e){t.addFieldInt8(4,+e,0)}},{key:"addHasT",value:function(t,e){t.addFieldInt8(5,+e,0)}},{key:"addHasTm",value:function(t,e){t.addFieldInt8(6,+e,0)}},{key:"addColumns",value:function(t,e){t.addFieldOffset(7,e,0)}},{key:"createColumnsVector",value:function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}},{key:"startColumnsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"addFeaturesCount",value:function(t,e){t.addFieldInt64(8,e,BigInt("0"))}},{key:"addIndexNodeSize",value:function(t,e){t.addFieldInt16(9,e,16)}},{key:"addCrs",value:function(t,e){t.addFieldOffset(10,e,0)}},{key:"addTitle",value:function(t,e){t.addFieldOffset(11,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(12,e,0)}},{key:"addMetadata",value:function(t,e){t.addFieldOffset(13,e,0)}},{key:"endHeader",value:function(t){return t.endObject()}},{key:"finishHeaderBuffer",value:function(t,e){t.finish(e)}},{key:"finishSizePrefixedHeaderBuffer",value:function(t,e){t.finish(e,void 0,!0)}}],(n=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"envelope",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"envelopeLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"envelopeArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"geometryType",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):me.Unknown}},{key:"hasZ",value:function(){var t=this.bb.__offset(this.bb_pos,10);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasM",value:function(){var t=this.bb.__offset(this.bb_pos,12);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasT",value:function(){var t=this.bb.__offset(this.bb_pos,14);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasTm",value:function(){var t=this.bb.__offset(this.bb_pos,16);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"columns",value:function(t,e){var n=this.bb.__offset(this.bb_pos,18);return n?(e||new Ue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}},{key:"columnsLength",value:function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"featuresCount",value:function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readUint64(this.bb_pos+t):BigInt("0")}},{key:"indexNodeSize",value:function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readUint16(this.bb_pos+t):16}},{key:"crs",value:function(t){var e=this.bb.__offset(this.bb_pos,24);return e?(t||new Ve).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}},{key:"title",value:function(t){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"metadata",value:function(t){var e=this.bb.__offset(this.bb_pos,30);return e?this.bb.__string(this.bb_pos+e,t):null}}])&&R(e.prototype,n),r&&R(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Ne=function(t,e){return Ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Ne(t,e)},Me=function(t){function e(e){var n=t.call(this,e)||this;return Object.defineProperty(n,"name",{value:"RepeaterOverflowError",enumerable:!1}),"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(n,n.constructor.prototype):n.__proto__=n.constructor.prototype,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(n,n.constructor),n}return function(t,e){function n(){this.constructor=t}Ne(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error),Le=(function(){function t(t){if(t<0)throw new RangeError("Capacity may not be less than 0");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),t.prototype.add=function(t){if(this.full)throw new Error("Buffer full");this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}(),function(){function t(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(t){for(;this._q.length>=this._c;)this._q.shift();this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}(),function(){function t(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(t){this._q.length<this._c&&this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}(),1024),Re=function(){},qe=new WeakMap,ze=function(){function t(t,e){qe.set(this,{executor:t,buffer:e,err:void 0,state:0,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:Re,onstop:Re})}return t.prototype.next=function(t){Z(t);var e=qe.get(this);if(void 0===e)throw new Error("WeakMap error");if(e.nexts.length>=Le)throw new Me("No more than 1024 pending calls to next are allowed on a single repeater.");if(e.state<=0&&nt(e),e.onnext(t),void 0!==e.buffer&&!e.buffer.empty){var n=$(e,e.buffer.remove());if(e.pushes.length){var r=e.pushes.shift();e.buffer.add(r.value),e.onnext=r.resolve}return n}if(e.pushes.length){var i=e.pushes.shift();return e.onnext=i.resolve,$(e,i.value)}return e.state>=2?(Q(e),$(e,Y(e))):new Promise((function(n){return e.nexts.push({resolve:n,value:t})}))},t.prototype.return=function(t){Z(t);var e=qe.get(this);if(void 0===e)throw new Error("WeakMap error");return Q(e),e.execution=Promise.resolve(e.execution).then((function(){return t})),$(e,Y(e))},t.prototype.throw=function(t){var e=qe.get(this);if(void 0===e)throw new Error("WeakMap error");return e.state<=0||e.state>=2||void 0!==e.buffer&&!e.buffer.empty?(Q(e),null==e.err&&(e.err=t),$(e,Y(e))):this.next(Promise.reject(t))},t.prototype[Symbol.asyncIterator]=function(){return this},t.race=it,t.merge=ot,t.zip=at,t.latest=ut,t}(),Ge=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ft(this,"_extraRequestThreshold",262144)}var e,n,r;return e=t,(n=[{key:"extraRequestThreshold",value:function(){return this._extraRequestThreshold}},{key:"setExtraRequestThreshold",value:function(t){if(t<0)throw Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=t}}])&&lt(e.prototype,n),r&&lt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();ft(Ge,"global",new Ge),kt.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},kt.prototype.next=function(t){return this._invoke("next",t)},kt.prototype.throw=function(t){return this._invoke("throw",t)},kt.prototype.return=function(t){return this._invoke("return",t)};var De=new Uint8Array([102,103,98,3,102,103,98,0]);Lt.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Lt.prototype.next=function(t){return this._invoke("next",t)},Lt.prototype.throw=function(t){return this._invoke("throw",t)},Lt.prototype.return=function(t){return this._invoke("return",t)};var He=function(){function t(e,n,r,i,o){Ct(this,t),Bt(this,"headerClient",void 0),Bt(this,"header",void 0),Bt(this,"headerLength",void 0),Bt(this,"indexLength",void 0),Bt(this,"nocache",void 0),this.headerClient=e,this.header=n,this.headerLength=r,this.indexLength=i,this.nocache=o}var e,n;return Vt(t,[{key:"selectBbox",value:function(t){var e=this;return Mt((function*(){var n,r=e.lengthBeforeTree(),i=e.headerClient,o=function(){var t=Tt((function*(t,e){return i.getRange(r+t,e,0,"index")}));return function(e,n){return t.apply(this,arguments)}}(),a=[],u=[],s=!1,l=!1;try{for(var f,c=zt(function(t,e,n,r){return xt.apply(this,arguments)}(e.header.featuresCount,e.header.indexNodeSize,t,o));s=!(f=yield Rt(c.next())).done;s=!1){var h=f.value,b=Ot(h,1)[0],y=Ot(h,3)[2];if(y||(y=4),0!=u.length){var d=u[u.length-1];b-(d[0]+d[1])>Ge.global.extraRequestThreshold()&&(a.push(u),u=[]),u.push([b,y])}else u.push([b,y])}}catch(t){l=!0,n=t}finally{try{s&&null!=c.return&&(yield Rt(c.return()))}finally{if(l)throw n}}e.headerClient.logUsage("header+index"),u.length>0&&a.push(u);var v=a.flatMap((function(t){return e.readFeatureBatch(t,e.nocache)}));yield*function(t){function e(e,n){return r=!0,{done:!1,value:new qt(n=new Promise((function(r){r(t[e](n))})),1)}}var n={},r=!1;return n["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},n.next=function(t){return r?(r=!1,t):e("next",t)},"function"==typeof t.throw&&(n.throw=function(t){if(r)throw r=!1,t;return e("throw",t)}),"function"==typeof t.return&&(n.return=function(t){return r?(r=!1,t):e("return",t)}),n}(zt(ze.merge(v)))}))()}},{key:"lengthBeforeTree",value:function(){return De.length+4+this.headerLength}},{key:"lengthBeforeFeatures",value:function(){return this.lengthBeforeTree()+this.indexLength}},{key:"buildFeatureClient",value:function(t){return new Je(this.headerClient.httpClient,t)}},{key:"readFeatureBatch",value:function(t,e){var n=this;return Mt((function*(){var r,i=Ot(t[0],1)[0],o=Ot(t[t.length-1],2),a=o[0],u=o[1],s=n.buildFeatureClient(e),l=a+u-i,f=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=jt(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}(t);try{for(f.s();!(r=f.n()).done;){var c=Ot(r.value,1)[0];yield yield Rt(n.readFeature(s,c,l)),l=0}}catch(t){f.e(t)}finally{f.f()}s.logUsage("feature")}))()}},{key:"readFeature",value:(n=Tt((function*(t,e,n){var r,i=e+this.lengthBeforeFeatures();r=new DataView(yield t.getRange(i,4,n,"feature length")).getUint32(0,!0);var o=new Uint8Array(yield t.getRange(i+4,r,n,"feature data")),a=new Uint8Array(r+4);a.set(o,4);var u=new Fe(a);return u.setPosition(4),Ae.getRootAsFeature(u)})),function(t,e,r){return n.apply(this,arguments)})}],[{key:"open",value:(e=Tt((function*(e,n){var r,i=new Je(e,n),o=2024+function(){var t,e=0;for(t=0;t<3;t++)e+=40*Math.pow(16,t);return e}();if(!new Uint8Array(yield i.getRange(0,8,o,"header")).subarray(0,3).every((function(t,e){return De[e]===t})))throw Error("Not a FlatGeobuf file");if((r=new DataView(yield i.getRange(8,4,o,"header")).getUint32(0,!0))>10485760||r<8)throw Error("Invalid header size");var a=yield i.getRange(12,r,o,"header"),u=G(new Fe(new Uint8Array(a)));return new t(i,u,r,It(u.featuresCount,u.indexNodeSize),n)})),function(t,n){return e.apply(this,arguments)})}]),t}(),Je=function(){function t(e,n){if(Ct(this,t),Bt(this,"httpClient",void 0),Bt(this,"bytesEverUsed",0),Bt(this,"bytesEverFetched",0),Bt(this,"buffer",new ArrayBuffer(0)),Bt(this,"head",0),"string"==typeof e)this.httpClient=new We(e,n);else{if(!(e instanceof We))throw Error("Unknown source ");this.httpClient=e}}var e;return Vt(t,[{key:"getRange",value:(e=Tt((function*(t,e,n,r){this.bytesEverUsed+=e;var i=t-this.head,o=i+e;if(i>=0&&o<=this.buffer.byteLength)return this.buffer.slice(i,o);var a=Math.max(e,n);return this.bytesEverFetched+=a,this.buffer=yield this.httpClient.getRange(t,a,r),this.head=t,this.buffer.slice(0,e)})),function(t,n,r,i){return e.apply(this,arguments)})},{key:"logUsage",value:function(t){t.split(" "),(100*this.bytesEverUsed/this.bytesEverFetched).toFixed(2)}}]),t}(),We=function(){function t(e,n){Ct(this,t),Bt(this,"url",void 0),Bt(this,"nocache",void 0),Bt(this,"requestsEverMade",0),Bt(this,"bytesEverRequested",0),this.url=e,this.nocache=n}var e;return Vt(t,[{key:"getRange",value:(e=Tt((function*(t,e){this.requestsEverMade+=1,this.bytesEverRequested+=e;var n={Range:"bytes=".concat(t,"-").concat(t+e-1)};return this.nocache&&(n["Cache-Control"]="no-cache, no-store"),(yield fetch(this.url,{headers:n})).arrayBuffer()})),function(t,n,r){return e.apply(this,arguments)})}]),t}();te.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},te.prototype.next=function(t){return this._invoke("next",t)},te.prototype.throw=function(t){return this._invoke("throw",t)},te.prototype.return=function(t){return this._invoke("return",t)}}}]);
//# sourceMappingURL=4.chunk.d33be.js.map